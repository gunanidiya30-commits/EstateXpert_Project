<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EMI Calculator | EstateXpert</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <h2 class="mb-4">EMI Calculator</h2>

    <form id="emiForm">
        <div class="mb-3">
            <label class="form-label">Loan Amount (₹)</label>
            <input type="number" class="form-control" id="loanAmount" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Annual Interest Rate (%)</label>
            <input type="number" step="0.01" class="form-control" id="interestRate" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Tenure (Years)</label>
            <input type="number" class="form-control" id="tenureYears" required>
        </div>

        <button type="submit" class="btn btn-primary">
            Calculate EMI
        </button>
    </form>

    <hr class="my-4">

    <div id="emiResult">
        <p><strong>Monthly EMI:</strong> —</p>
        <p><strong>Total Interest:</strong> —</p>
        <p><strong>Total Payment:</strong> —</p>
    </div>
</div>

<script>
document.getElementById("emiForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const loanAmount = document.getElementById("loanAmount").value;
    const interestRate = document.getElementById("interestRate").value;
    const tenureYears = document.getElementById("tenureYears").value;

    fetch("http://127.0.0.1:5000/calculate_emi", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            loan_amount: loanAmount,
            annual_interest_rate: interestRate,
            tenure_years: tenureYears
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            alert(data.error);
            return;
        }

        document.getElementById("emiResult").innerHTML = `
            <p><strong>Monthly EMI:</strong> ₹ ${data.monthly_emi}</p>
            <p><strong>Total Interest:</strong> ₹ ${data.total_interest}</p>
            <p><strong>Total Payment:</strong> ₹ ${data.total_payment}</p>
        `;
    })
    .catch(error => {
        console.error("Error:", error);
        alert("Failed to calculate EMI");
    });
});
</script>

</body>
</html>
