<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ROI & Loan Eligibility</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">ROI & Loan Eligibility Calculator</h4>
        </div>
        <div class="card-body">

            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Property Price (₹)</label>
                    <input type="number" id="property_price" class="form-control">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Expected Annual Return (%)</label>
                    <input type="number" id="expected_annual_return" class="form-control">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Investment Years</label>
                    <input type="number" id="investment_years" class="form-control">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Annual Income (₹)</label>
                    <input type="number" id="annual_income" class="form-control">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Existing Monthly EMI (₹)</label>
                    <input type="number" id="existing_emi" class="form-control">
                </div>
            </div>

            <div class="mt-4">
                <button class="btn btn-success" onclick="calculateROI()">Calculate</button>
            </div>

            <hr>

           <div id="result" class="mt-3"></div>

<div class="mt-4 alert alert-secondary">
    <h6>How to read these results</h6>
    <ul class="mb-0">
        <li>
            <strong>ROI Percentage:</strong>
            Shows how much your property investment grows over time based on the expected annual return.
        </li>
        <li>
            <strong>Eligible Loan Amount:</strong>
            Calculated using a safe rule where your total EMIs should not exceed 40% of your monthly income.
        </li>
        <li>
            <strong>Status:</strong>
            <em>ELIGIBLE</em> means you can safely take a loan,  
            <em>NOT ELIGIBLE</em> means your current income or EMIs are too high.
        </li>
    </ul>
</div>


        </div>
    </div>
</div>

<script>
function calculateROI() {
    const data = {
        property_price: document.getElementById("property_price").value,
        expected_annual_return: document.getElementById("expected_annual_return").value,
        investment_years: document.getElementById("investment_years").value,
        annual_income: document.getElementById("annual_income").value,
        existing_emi: document.getElementById("existing_emi").value
    };

    fetch("http://127.0.0.1:5000/roi_loan_eligibility", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(result => {
        if (result.error) {
            document.getElementById("result").innerHTML =
                `<div class="alert alert-danger">${result.error}</div>`;
            return;
        }

        document.getElementById("result").innerHTML = `
            <div class="alert alert-info">
                <p><strong>ROI Percentage:</strong> ${result.roi_percentage}%</p>
                <p><strong>Eligible Loan Amount:</strong> ₹${result.eligible_loan_amount}</p>
                <p><strong>Status:</strong> ${result.eligibility_status}</p>
            </div>
        `;
    });
}
</script>

</body>
</html>
